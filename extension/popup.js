
window.addEventListener("DOMContentLoaded", (event) => {
  const el = document.getElementById('btn1');
  if (el) {
    el.addEventListener('click', checkStatus, false);
  }
});


function checkStatus(){


  fetch('http://localhost:5000/checkStatus', {
        method: 'post',
        mode: 'cors',
        headers: {
            'Content-Type': 'application/json'
          },
        body: JSON.stringify("test")
      }).then(data => {
        return data.text();
      }).then(data => {
        result = data;
      })
      
      printResult(result);
      
}

window.addEventListener("DOMContentLoaded", (event) => {
  const el = document.getElementById('btn2');
  if (el) {
    el.addEventListener('click', getResult, false);
  }
});

function getResult(){
  location.href='popupresult.html'
}

/*
function checkStatus(){
  fetch('http://localhost:5000/reset', {
        method: 'post',
        mode: 'cors',
        headers: {
            'Content-Type': 'application/json'
          },
        body: JSON.stringify("test")
      }).then(data => {
        return data.text();
      }).then(data => {
        result = data;
      })
      
}
*/

/*
function checkStatus(){
  fetch('http://localhost:5000/testStart', {
        method: 'post',
        mode: 'cors',
        headers: {
            'Content-Type': 'application/json'
          },
        body: JSON.stringify("test")
      }).then(data => {
        return data.text();
      }).then(data => {
        result = data;
      })
      
      printResult(result);
      
}
*/

/*
function checkStatus(){
  fetch('http://localhost:5000/testFinished', {
        method: 'post',
        mode: 'cors',
        headers: {
            'Content-Type': 'application/json'
          },
        body: JSON.stringify("test")
      }).then(data => {
        return data.text();
      }).then(data => {
        result = data;
      })
      
      printResult(result);
      
}
*/


function printResult(status){
  status = status.slice(1,-2);
//add logic to print result

if(status === "finished"){
  document.getElementById("statusHeader").textContent = status;
  const elements = document.getElementsByClassName("lds-default");
      while(elements.length > 0){
          elements[0].parentNode.removeChild(elements[0]);
      }
      location.href='popupfinished.html'
} else if(status === "notStarted") {
  window.location.reload()
} else if(status === "started") {
  document.getElementById("statusHeader").textContent = "analysis has started";
}

}


function printStarted(){
  
  document.getElementById("statusHeader").textContent = result;
  
      
}

function printNotStarted(){
    document.getElementById("statusHeader").textContent = result;
 
      
}
